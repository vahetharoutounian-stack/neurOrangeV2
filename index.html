<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no, maximum-scale=1"
/>
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<title>neurOrange • Gallery (mapped)</title>
<style>
  :root{
    --glass: rgba(0,0,0,.28);
    --gap: clamp(24px, 7vw, 72px);    /* farther apart */
    --basis: 21%;                     /* slimmer cards */
    --scaleCenter: 1.6;
    --scaleSide: .80;
    --rowH: 22vh;
  }
  html,body{margin:0;background:#000;color:#fff;-webkit-font-smoothing:antialiased;
    font-family: ui-sans-serif,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}
  #stage{position:fixed;inset:0;display:grid;place-items:center;
    padding:env(safe-area-inset-top) env(safe-area-inset-right)
            env(safe-area-inset-bottom) env(safe-area-inset-left);}
  #frame{position:relative;height:100dvh;width:min(100dvw,calc(100dvh*9/16));
    border-radius:18px;overflow:hidden;border:1px solid rgba(255,255,255,.08);background:#000;box-shadow:0 20px 80px rgba(0,0,0,.55);}
  #frame::before{content:"";position:absolute;inset:0;z-index:0;background:url("gallery.jpg") center/auto 100% no-repeat;
    filter:saturate(105%) brightness(95%);}
  #content{position:relative;z-index:1;height:100%;display:flex;flex-direction:column;gap:10px;padding:0 0 10px 0;}
  .carousel{position:relative;height:var(--rowH);width:100%;background:var(--glass);
    backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);border-radius:12px;border:1px solid rgba(255,255,255,.08);overflow:hidden;}
  #track{position:relative;width:100%;height:100%;display:flex;align-items:center;gap:var(--gap);
    overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;scroll-behavior:smooth;
    scroll-snap-type:x mandatory;scroll-snap-stop:always;padding:0 var(--gap);scrollbar-width:none;touch-action:pan-x;cursor:grab;}
  #track::-webkit-scrollbar{display:none;}
  #track.dragging{cursor:grabbing;}
  .spacer{flex:0 0 60%;height:1px;}
  .card{flex:0 0 var(--basis);height:calc(100%/var(--scaleCenter));scroll-snap-align:center;
    display:flex;align-items:center;justify-content:center;transform:scale(var(--scaleSide));
    transition:transform .18s ease,z-index .18s ease,filter .18s ease;}
  .card img{max-height:100%;width:auto;height:auto;object-fit:contain;
    display:block;-webkit-user-drag:none;user-select:none;background:#0b0b0c;
    filter:drop-shadow(0 0 28px rgba(0,0,0,.95)) drop-shadow(0 0 52px rgba(0,0,0,.75));
    box-shadow:0 0 64px 36px rgba(0,0,0,.8);}
  /* compact caption (two lines, justified) */
  #desc{width:70%;margin:8px auto 0;min-height:4.6vh;max-height:10vh;padding:6px 10px;
    font-size:13.25px;line-height:1.35;color:#f2f2f2;background:var(--glass);
    backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);border-radius:12px;border:1px solid rgba(255,255,255,.08);}
  #desc .head{font-weight:700;margin-bottom:2px;}
  #desc .body{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;
    overflow:hidden;text-overflow:ellipsis;text-align:justify;}

  /* modal */
  #modal{position:fixed;inset:0;display:none;flex-direction:column;align-items:center;justify-content:center;
    background:rgba(0,0,0,.88);color:#fff;z-index:9990;
    padding:env(safe-area-inset-top) 3vw env(safe-area-inset-bottom) 3vw;}
  #modal.show{display:flex;}
  #modal .inner{max-width:min(92vw,420px);}  /* keep safely inside phone edge */
  #modal img{width:100%;height:auto;border:2px solid #fff;border-radius:8px;margin-bottom:12px;}
  #modal .title{font-weight:800;margin:.25rem 0 .35rem 0;}
  #modal .long{max-height:38vh;overflow:auto;-webkit-overflow-scrolling:touch;
    font-size:0.95rem;line-height:1.45;text-align:justify;}
  #swatches{display:flex;gap:8px;flex-wrap:wrap;margin:.5rem 0 0 0;}
  .sw{display:flex;align-items:center;gap:6px;padding:4px 6px;border-radius:8px;border:1px solid rgba(255,255,255,.14);}
  .sw i{display:inline-block;width:16px;height:16px;border-radius:4px;border:1px solid rgba(255,255,255,.35);}

  #rotate{position:fixed;inset:0;display:none;place-items:center;z-index:9999;background:rgba(0,0,0,.82);
    color:#fff;text-align:center;padding:2rem;}
  #rotate.show{display:grid;}
</style>
</head>
<body>
<div id="stage">
  <div id="frame" role="application" aria-label="Orange Painting Gallery">
    <div id="content">
      <div class="carousel" aria-roledescription="carousel" aria-live="polite"><div id="track"></div></div>
      <div id="desc" aria-live="polite"></div>
    </div>
  </div>
</div>

<!-- Modal -->
<div id="modal" role="dialog" aria-modal="true" aria-label="Painting details">
  <div class="inner">
    <img id="mimg" alt="">
    <div class="title" id="mtitle"></div>
    <div class="long" id="mlong"></div>
    <div id="swatches" aria-label="palette"></div>
  </div>
</div>

<!-- Rotate hint (mobile-only) -->
<div id="rotate"><div>
  <h2 style="margin:0 0 .6rem 0;">Please rotate your phone</h2>
  <div>This gallery is designed for portrait on small touch devices.</div>
</div></div>

<script>
function fit(){
  const frame=document.getElementById('frame');const vw=innerWidth,vh=innerHeight;
  frame.style.width=Math.min(vw,Math.floor(vh*9/16))+'px';frame.style.height=vh+'px';
  const isTouch=matchMedia('(pointer:coarse)').matches;
  document.getElementById('rotate').classList.toggle('show',isTouch&&vw>vh&&vh<820);
}
addEventListener('resize',fit,{passive:true});addEventListener('DOMContentLoaded',fit);

/* === Your 12 paintings (exact order you provided) === */
const PAINTINGS = [
  {src:'paintings/1.jpg',  title:'Impression, Sunrise', artist:'Claude Monet',            year:'1872'},
  {src:'paintings/2.jpg',  title:'The Fighting Temeraire', artist:'J. M. W. Turner',     year:'1839'},
  {src:'paintings/3.jpg',  title:'Orange and Yellow',      artist:'Mark Rothko',         year:'1956'},
  {src:'paintings/4.jpg',  title:'South Wind, Clear Sky',  artist:'Katsushika Hokusai',  year:'c. 1830'},
  {src:'paintings/5.jpg',  title:'Red Canna',              artist:'Georgia O’Keeffe',    year:'1924'},
  {src:'paintings/6.jpg',  title:'Composition VIII',       artist:'Wassily Kandinsky',   year:'1923'},
  {src:'paintings/7.jpg',  title:'Synchromy in Orange: To Form', artist:'Stanton MacDonald-Wright', year:'1914'},
  {src:'paintings/8.jpg',  title:'Target with Four Faces', artist:'Jasper Johns',        year:'1955'},
  {src:'paintings/9.jpg',  title:'Beginning',              artist:'Kenneth Noland',      year:'1958'},
  {src:'paintings/10.jpg', title:'The Night Café',         artist:'Vincent van Gogh',    year:'1888'},
  {src:'paintings/11.jpg', title:'Bedroom in Arles',       artist:'Vincent van Gogh',    year:'1889'},
  {src:'paintings/12.jpg', title:'Flaming June',           artist:'Frederic Leighton',   year:'1895'},
];

/* === Descriptions (sourced from your Picture_desc.txt where available; others are placeholders).
   Short text kept compact; long text scrolls; palettes render as swatches. === */
const DESCRIPTIONS = [
  /*  Monet  */       {title:'Impression, Sunrise', short:'A quick, vibrating harbor dawn—sun and reflection as two orange pulses amidst mist.',
    long:'No detailed description available yet for Impression, Sunrise.', palette:[]},
  /*  Turner */       {title:'The Fighting Temeraire',
    short:'A veteran sailing ship, towed by steam into a blazing sunset—Turner’s elegy for an age.',
    long:`Joseph Mallord William Turner’s farewell pairs a ghostly warship with a sooty tug under a furnace sky; orange dusk becomes metaphor—memory, passing glory, and the modern world arriving.`, 
    palette:['#FFD6A5','#FF9900','#FF4500','#B87333','#8B4513']}, /* filecite marker: descriptions and palette from Picture_desc.txt */ 
  /*  Rothko */       {title:'Orange and Yellow', short:'Two hovering color fields—yellow over orange—invite quiet, expansive feeling.',
    long:'No detailed description available yet for Orange and Yellow.', palette:[]},
  /*  Hokusai */      {title:'South Wind, Clear Sky', short:'Fuji glows vermilion at dawn; clouds drift like calligraphy across a cool sky.',
    long:'No detailed description available yet for South Wind, Clear Sky.', palette:[]},
  /*  O’Keeffe */     {title:'Red Canna',
    short:'Petals become landscape: molten reds and oranges fill the frame with living heat.',
    long:`O’Keeffe magnifies a bloom until it reads as pure form and color; orange is vitality—warmth, sensuality, and the modern confidence that color alone can speak.`,
    palette:['#B22222','#FF4500','#FF8C00','#FFA07A','#FFD1A1']}, /* filecite marker */ 
  /*  Kandinsky */    {title:'Composition VIII', short:'Geometries collide on a luminous field; rhythm and counterpoint made visible.',
    long:'No detailed description available yet for Composition VIII.', palette:[]},
  /*  MacDonald-Wright */ {title:'Synchromy in Orange: To Form', short:'Color as symphony—spiraling “synchromy” in blazing oranges and greens.',
    long:'No detailed description available yet for Synchromy in Orange: To Form.', palette:[]},
  /*  Johns */       {title:'Target with Four Faces', short:'A cool target crowned by cropped faces—objective sign meets human hint.',
    long:'No detailed description available yet for Target with Four Faces.', palette:[]},
  /*  Noland */      {title:'Beginning',
    short:'Concentric rings focus on a vermilion core—color as genesis.',
    long:`Stain-painted bands orbit a warm nucleus. The central orange feels like first light; the surrounding cool rings make it throb.`,
    palette:['#E34A33','#FFA500','#F5D0A9','#F4A460']},  /* filecite marker */
  /*  Night Café */  {title:'The Night Café',
    short:'Red-orange walls and jaundiced lamps turn a bar into moral heat.',
    long:`Van Gogh’s “terrible passions” glow in clashing complements; orange is fever—restless, airless, and charged with insomnia’s psychic temperature.`,
    palette:['#FF6347','#FF4500','#CD5C5C','#FF8C00','#C04000']},  /* filecite marker */
  /*  Bedroom */     {title:'Bedroom in Arles', short:'A humble room tilts toward us—color simplifies shape into feeling.',
    long:'No detailed description available yet for Bedroom in Arles.', palette:[]},
  /*  Leighton */    {title:'Flaming June',
    short:'A sleeping figure wrapped in orange silk—summer’s heat made human.',
    long:`Academic grace meets chromatic fire; glazed orange drapery seems to emit light—beauty, warmth, and a hint of danger.`,
    palette:['#FF7F50','#FFA500','#E97451','#FFDAB9','#CD5C5C']},  /* filecite marker */
];

/* Robust title matching (handles aliases & accents) */
const ALIASES = {
  'red canna':'canna red and orange',
  'the night cafe':'the night café',
  'south wind, clear sky (red fuji)':'south wind, clear sky',
  'red fuji':'south wind, clear sky'
};
const canon = s => s
  .toLowerCase()
  .normalize('NFD').replace(/\p{Diacritic}/gu,'')
  .replace(/[^a-z0-9 ]+/g,' ')
  .replace(/\s+/g,' ').trim();

const DESK = Object.fromEntries(
  DESCRIPTIONS.map(d => [canon(d.title), d])
);
/* alias fold-in */
for (const [a,b] of Object.entries(ALIASES)){
  DESK[a]=DESK[canon(b)]||DESK[a];
}

/* gallery build */
const track=document.getElementById('track');
const descEl=document.getElementById('desc');
let activeIndex=0;

function probe(src){return new Promise(res=>{const im=new Image();im.onload=()=>res(true);im.onerror=()=>res(false);im.src=src;});}

async function loadAll(){
  const existing=[];
  for (const p of PAINTINGS){ if (await probe(p.src)) existing.push(p); }
  if(!existing.length){
    descEl.innerHTML="<div class='head'><b>No paintings found</b></div><div class='body'>Place images 1.jpg…12.jpg in /paintings.</div>";
    return;
  }
  track.appendChild(Object.assign(document.createElement('div'),{className:'spacer'}));
  existing.forEach((p,i)=>{
    const card=document.createElement('div');card.className='card';card.dataset.index=i;
    const img=new Image();img.decoding='async';img.src=p.src;img.alt=`${p.title} — ${p.artist}`;card.appendChild(img);
    track.appendChild(card);
  });
  track.appendChild(Object.assign(document.createElement('div'),{className:'spacer'}));
  activeIndex=0; requestAnimationFrame(updateScales); updateCaption();
  track.querySelector('.card')?.scrollIntoView({behavior:'auto',inline:'center',block:'nearest'});
}

/* scaling & snap */
let ticking=false;
function cssn(v){return parseFloat(getComputedStyle(document.documentElement).getPropertyValue(v));}
function updateScales(){
  const cards=[...track.querySelectorAll('.card')]; if(!cards.length) return;
  const cx=track.clientWidth/2, base=track.scrollLeft; let best=0, bestD=1e9;
  cards.forEach((el,i)=>{
    const mid=el.offsetLeft+el.offsetWidth/2-base; const d=Math.abs(mid-cx);
    if(d<bestD){bestD=d; best=i;}
    const s=cssn('--scaleCenter')-(cssn('--scaleCenter')-cssn('--scaleSide'))*Math.min(1,d/(track.clientWidth*.5));
    el.style.transform=`scale(${s.toFixed(3)})`; el.style.zIndex=String(1000-Math.round(d));
  });
  if(best!==activeIndex){activeIndex=best; updateCaption();}
}
track.addEventListener('scroll',()=>{if(ticking)return; ticking=true; requestAnimationFrame(()=>{updateScales(); ticking=false;});},{passive:true});
addEventListener('resize',updateScales,{passive:true});

/* caption & modal */
function lookup(p){
  const k=canon(p.title);
  return DESK[k] || DESK[ALIASES[k]||''] || {title:p.title,short:'',long:'',palette:[]};
}
function updateCaption(){
  const p=PAINTINGS[activeIndex]; if(!p) return;
  const d=lookup(p);
  descEl.innerHTML = `<div class="head">${p.title} — ${p.artist} ${p.year?`(${p.year})`:''}</div>
                      <div class="body">${d.short||' '}</div>`;
}
const modal=document.getElementById('modal'); const mimg=document.getElementById('mimg');
const mtitle=document.getElementById('mtitle'); const mlong=document.getElementById('mlong');
const sw=document.getElementById('swatches');

function openModal(){
  const p=PAINTINGS[activeIndex]; if(!p) return;
  const d=lookup(p);
  const card=track.querySelectorAll('.card')[activeIndex]; const img=card?.querySelector('img');
  mimg.src=img?.src||''; mimg.alt=p.title+' — full view';
  mtitle.textContent = `${p.title} — ${p.artist}${p.year?`, ${p.year}`:''}`;
  mlong.textContent = d.long||d.short||'';
  /* swatches */
  sw.innerHTML='';
  (d.palette||[]).forEach(hex=>{
    const chip=document.createElement('span'); chip.className='sw';
    const chipColor=document.createElement('i'); chipColor.style.background=hex;
    const label=document.createElement('span'); label.textContent=hex.toUpperCase();
    chip.appendChild(chipColor); chip.appendChild(label); sw.appendChild(chip);
  });
  modal.classList.add('show');
}
function closeModal(){modal.classList.remove('show');}
let lastTap=0;
track.addEventListener('touchend',e=>{const now=Date.now(); if(now-lastTap<300){openModal(); e.preventDefault();} lastTap=now;},{passive:false});
track.addEventListener('dblclick',openModal);
modal.addEventListener('click',e=>{ if(e.target===modal) closeModal(); });

/* boot */
document.addEventListener('DOMContentLoaded',loadAll);
</script>
</body>
</html>
